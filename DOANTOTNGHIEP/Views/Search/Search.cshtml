@using PagedList.Mvc;
@using PagedList;

@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Layout/_LayoutNhatro.cshtml";
    var product = @ViewBag.Product;
}

<div class="container">
    <div class="row">
        <div class="col-md-9">
            <div class="row">
                <div class="col-md-12 room-main-content">
                    <div class="pt-breadcrumb">
                        <ol class="breadcrumb">
                            <li><a href="@Url.Action("index", "Home")">Trang chủ</a></li>
                            <li class="active">Tìm Kiếm</li>
                        </ol>
                    </div><div class="room-list-category">
                        <div class="pull-left">
                            <a href=""><h3><span>Kết Quả Tìm Kiếm</span> <i class="fa fa-angle-right"></i></h3></a>
                        </div>
                        @*<div class="pull-right">
                <form id="order_form" class="form-inline form-oder-category" method="post" action="#">
                    <input type="hidden" name="_token" value="7GSbASzO7NQ8MKYGsTbABtkVYBe05nHbfcbqpIpb">
                    <div class="form-group">
                        <div class="btn btn-select btn-select-light">
                            <span class="btn-select-value">Chọn thành phố</span>
                            <span class="btn-select-arrow fa fa-angle-down"></span>
                            <ul>
                                <li class="fill-target"><a style="text-decoration: none;" href="#/phong-tro-nha-tro?fill=1">Hà Nội</a></li>
                                <li class="fill-target"><a style="text-decoration: none;" href="#/phong-tro-nha-tro?fill=31">Hải Phòng</a></li>
                                <li class="fill-target"><a style="text-decoration: none;" href="#/phong-tro-nha-tro?fill=48">Đà Nẵng</a></li>
                                <li class="fill-target"><a style="text-decoration: none;" href="#/phong-tro-nha-tro?fill=79">Hồ Chí Minh</a></li>
                                <li class="fill-target"><a style="text-decoration: none;" href="#/phong-tro-nha-tro?fill=92">Cần Thơ</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="form-group">
                        <a class="btn btn-select btn-select-light btn-oder-price">
                            <input type="hidden" class="btn-select-input" id="price" name="price" value="null">
                            <span class="btn-select-value">Sắp xếp giá</span>
                            <span class="btn-select-arrow fa fa-angle-down"></span>
                            <ul>
                                <li class="get_price">Giá tăng dần</li>
                                <li class="get_price">Giá giảm dần</li>
                            </ul>
                        </a>
                    </div>
                    <div class="form-group">
                        <a class="btn btn-select btn-select-light btn-oder-time">
                            <input type="hidden" class="btn-select-input" id="time" name="time" value="">
                            <span class="btn-select-value">Sắp xếp thời gian</span>
                            <span class="btn-select-arrow fa fa-angle-down"></span>
                            <ul>
                                <li class="get_time">Cũ nhất</li>
                                <li class="get_time">Mới nhất</li>
                            </ul>
                        </a>
                    </div>
                </form>
            </div>*@
                        <div class="clearfix"></div>
                        <hr>
                    </div>
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $('.get_price').on('click', function (e) {
                                var i = $(this).text();
                                price.value = i;
                                time.value = '';
                                $('#order_form').submit();
                            });
                            $('.get_time').on('click', function (e) {
                                var i = $(this).text();
                                price.value = '';
                                time.value = i;
                                $('#order_form').submit();
                            });
                            $('body').on('click', '.fill-target', function () {
                                window.location.href = $(this).find('a').attr('href');

                            });
                        });
                    </script>
                    <div class="room-list">
                        @foreach (var item in @ViewBag.Product)
                        {
                            <div class="room-item">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="block-room-item-title">
                                            <a href="@Url.Action("ChiTiet", "ChiTiet", new { @ProductId = @item.Id})">@item.Title</a>
                                        </div>
                                        <div class="col-md-3 room-item-thumbnail">
                                            <div class="row">
                                                <a class="col-md-12 thumbnail room-item-main-img" href="@Url.Action("ChiTiet", "ChiTiet", new { @ProductId = @item.Id})">
                                                    <img class="img-reponsive" src="~/Content/images/@item.Image" alt="">
                                                </a>
                                            </div>
                                        </div>
                                        <div class="col-md-9 room-item-i">
                                            <div class="block-room-item-address">
                                                <span>Địa chỉ: </span>
                                                <a>
                                                    @item.District
                                                </a>
                                            </div>
                                            <div class="block-room-item-info">
                                                <div class="pull-left">
                                                    <span>Diện tích: </span><a>@item.Acreage m2</a>
                                                </div>
                                                <div class="pull-right item-info-date">
                                                    <a>
                                                        @item.CreatedDate
                                                    </a>
                                                </div>
                                                <div class="item-info-vs">
                                                    <span>Vệ sinh: </span><a>Khép kín</a>
                                                </div>
                                            </div>
                                            <div class="block-room-item-price">
                                                <span>Giá cả: </span><a> @item.Price Đ/tháng</a>
                                            </div>

                                            <div class="block-room-item-btn">
                                                <a class="btn btn-room-detail" href="@Url.Action("ChiTiet", "ChiTiet", new { @ProductId = @item.Id})">Xem chi tiết</a>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                        }


                    </div>
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $('.btn-room-save').on('click', function (e) {
                                var i = $(this);
                                var div = i.parent();
                                $.ajax({
                                    url: i.attr('_url'),
                                    type: 'GET',
                                    dataType: 'json',
                                    success: function (result) {
                                        i.remove();
                                        div.append(result);
                                        setTimeout(function () { $('.flash-mesage').remove(); }, 1000);
                                    }
                                });
                            });
                        });
                    </script>
                    <!-- Thêm mã phân trang -->
                    <br />
                    @*Trang @(product.PageCount < product.PageNumber ? 0 : product.PageNumber) / @product.PageCount*@
                    Trang @(product.PageCount < product.PageNumber ? 0 : product.PageNumber) / @product.PageCount
                    @Html.PagedListPager((IPagedList)product, page => Url.Action("Search", new { Page = page }))
                    <!-- Thêm mã phân trang -->
                    <br />


                    <!-- Kết thúc -->
                </div>
            </div>
        </div>
        <div class="col-md-3 sidebar">
            <div class="row">
                <div class="col-sm-6 col-md-12">
                    <div class="advance-search">
                        <div class="title">
                            <a id="submit_search" href="javascript:void(0);"><span class="fa fa-search"></span></a>Tìm kiếm nâng cao
                        </div>
                        <div class="shr"><hr></div>
                        <form class="form" id="search_form" action="#/tim-kiem" method="GET">
                            <div class="form-group tp">
                                <a class="btn btn-select btn-select-light btn-tp">
                                    <input type="hidden" class="btn-select-input" id="province" name="province" value="">
                                    <span class="btn-select-value">Chọn tỉnh, thành phố</span>
                                    <span class="btn-select-arrow fa fa-angle-down"></span>
                                    <ul>
                                        <li class="get_province" value="1"> Hà Nội</li>
                                        <li class="get_province" value="31"> Hải Phòng</li>
                                        <li class="get_province" value="48"> Đà Nẵng</li>
                                        <li class="get_province" value="79"> Hồ Chí Minh</li>
                                        <li class="get_province" value="92"> Cần Thơ</li>
                                    </ul>
                                </a>
                            </div>
                            <div class="form-group">
                                <a class="btn btn-select btn-select-light btn-tp">
                                    <input type="hidden" class="btn-select-input" id="district" name="district" value="">
                                    <span id="district-select" class="btn-select-value">Chọn quận, huyện</span>
                                    <span class="btn-select-arrow fa fa-angle-down"></span>
                                    <ul id="districtGroup">
                                        <li class="province" value="1">Hai Bà Tưng</li>
                                        <li class="province" value="31">Hoàng Mai</li>
                                        <li class="province" value="48">Bách Khoa</li>
                                        <li class="province" value="79">Minh Khai</li>
                                        <li class="province" value="92">Cầu Giấy</li>
                                    </ul>
                                </a>
                            </div>
                            <div class="form-group">
                                <a class="btn btn-select btn-select-light btn-tp">
                                    <input type="hidden" class="btn-select-input" id="district" name="district" value="">
                                    <span id="district-select" class="btn-select-value">Chọn đường</span>
                                    <span class="btn-select-arrow fa fa-angle-down"></span>
                                    <ul id="districtGroup">
                                        <li class="province" value="1">Hai Bà Tưng</li>
                                        <li class="province" value="31">Hoàng Mai</li>
                                        <li class="province" value="48">Bách Khoa</li>
                                        <li class="province" value="79">Minh Khai</li>
                                        <li class="province" value="92">Cầu Giấy</li>
                                    </ul>
                                </a>
                            </div>
                            <div class="form-group">
                                <a class="btn btn-select btn-select-light btn-tp">
                                    <input type="hidden" class="btn-select-input" id="district" name="district" value="">
                                    <span id="district-select" class="btn-select-value">Chọn đường</span>
                                    <span class="btn-select-arrow fa fa-angle-down"></span>
                                    <ul id="districtGroup">
                                        <li class="province" value="1">Phòng trọ, nhà trọ</li>
                                        <li class="province" value="31">Nhà nguyên căn</li>
                                        <li class="province" value="48">Nhà mặt phố</li>
                                        <li class="province" value="79">Văn phòng</li>
                                        <li class="province" value="92">Chung cư, căn hộ</li>
                                        <li class="province" value="92">Mặt bằng, cửa hàng</li>
                                    </ul>
                                </a>
                            </div>
                            <div class="form-group">
                                <a class="btn btn-select btn-select-light btn-select-city">
                                    <input type="hidden" class="btn-select-input" id="province" name="province" value="" />
                                    <span id="price" class="btn-select-value">Chọn khoảng giá</span>
                                    <span class="btn-select-arrow fa fa-angle-down"></span>
                                    <ul>
                                        <li class="province" value="1">Dưới 1 triệu</li>
                                        <li class="province" value="31">1 triệu - 2 triệu</li>
                                        <li class="province" value="48">2 triệu - 3 triệu</li>
                                        <li class="province" value="79">3 triệu - 5 triệu</li>
                                        <li class="province" value="92">5 triệu - 7 triệu</li>
                                        <li class="province" value="92">7 triệu - 10 triệu</li>
                                        <li class="province" value="92">Trên 10 triệu</li>
                                    </ul>
                                </a>
                            </div>
                            <div class="form-group submit">
                                <button type="submit" class="btn btn-slide-search"><span class="fa fa-search"></span>Tìm kiếm</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>     
            <div class="clearfix"></div>
        </div>
    </div>
</div>


